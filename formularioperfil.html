<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar perfil</title>
    <link rel="stylesheet" href="editarperfil.css">
    <link rel="stylesheet" href="https://fontawesome.com/icons/asterisk?f=classic&s=solid">
</head>
<body>
    <div class="fondo">

        <div class="logo">
            <img src="Group 13.svg" alt="">
        </div>

        <div class="fondocarta"></div>

        <!-- Input tipo imagen con imagen predeterminada -->
        <input type="image" src="Group 95 (1).jpg" alt="Foto de perfil" id="foto" 
            style="width: 150px;height: 150px;border: 2px solid #00B1A4;position: relative;left: 425px;">

        <!-- Botón para subir imagen -->
        <button id="uploadBtn">Upload photo</button>
        <button id="removeBtn">Remove photo</button>

        <!-- Input de archivo oculto -->
        <input type="file" id="fileInput" style="display: none;" accept="image/*">
        <div class="name">
            <i class="asterisco">*</i>
            <label for="name" id="firstname">First Name</label>
            <input type="text" placeholder="Your First Name here" required>
        </div>

        <div class="FirstLastName">
            <i class="asterisco">*</i>
            <label for="name" id="firstLastname">First Last Name</label>
            <input type="text" id="firstLastname" placeholder="Your First Last Name here" required>
        </div>


        <div class="Country" id="country">
            <i class="asterisco">*</i>
            <label for="country">Country</label>
            <input type="text" id="country3" placeholder="Your country">
        </div>

        <div class="City" id="city">
            <i class="asterisco">*</i>
            <label for="city">City</label>
            <input type="text" id="city2" placeholder="Your city">
        </div>

        <div class="Adress" >
            <i class="asterisco">*</i>
            <label for="address">Address</label>
            <input type="text" id="address" placeholder="Your address">
        </div>


        <div class="PostalCode">
            <i class="asterisco">*</i>
            <label for="postalcode">Postal Code</label>
            <input type="text" id="postalcode" placeholder="Your postal code">
        </div>


        <div class="Email">
            <i class="asterisco">*</i>
            <label for="email">Email</label>
            <input type="email" placeholder="Your email">
        </div>


        <div class="Phonenumber">
            <i class="asterisco">*</i>
            <label for="Phonenumber">Phone Number</label>
            <input type="text" placeholder="Your phone number">
        </div>


        <div class="experience">
            <i class="asterisco">*</i>
            <label for="experience">Years of experience</label>
            <select name="experience" id="experienceyear">
                <option value="0-1">0-1 year</option>
                <option value="0-1">1-3 years</option>
                <option value="0-1">4-7 years</option>
                <option value="0-1">+8 years</option>
            </select>
        </div>


        <div class="Bio">
            <i class="asterisco">*</i>
            <label for="bio">Bio (Keywords)</label>
            <textarea name="" id="" placeholder="Your bio..."></textarea>
        </div>

        <i class="asteriscoetiquetas">*</i>
        <label for="etiquetas" id="etiquetatitulo">Photography types</label>
        <select name="types" id="phototypes">
            <option value="">Wildlife</option>
            <option value="">Portrait</option>
            <option value="">Macro</option>
            <option value="">B&W</option>
        </select>


        <div class="studio">
            <i class="asterisco">*</i>
            <label for="studio">Studio avabiality</label>
            <select name="yesorno" id="options">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>

        <div class="languages">
            <i class="asterisco">*</i>
            <label for="languages">Language</label>
            <input type="text" id="languages2" maxlength="23">
        </div>
        

        <label for="portfolioo" class="portfoliotitle">Portfolio</label>
        <input aria-placeholder="Upload portfolio" type="file" name="file12" id="portfolio" accept="application/pdf"></input>

        <a href="perfil.html">
        <div class="enviar">
            <button onclick="saveProfile()" id="enviarr">Save changes</button>
        </div>
    </a>
    </div>

    <!-- -----------------------------// JAVASCRIPT ------------------------------ -->
    <script>




        // Imagen predeterminada
        const defaultImage = "Group 95 (1).jpg";

        // Obtener los elementos
        const uploadBtn = document.getElementById("uploadBtn");
        const removeBtn = document.getElementById("removeBtn");
        const imageInput = document.getElementById("foto");
        const fileInput = document.getElementById("fileInput");
        document.addEventListener("DOMContentLoaded", () =>{
        
            if (localStorage.getItem("profile")) {
                const profile = JSON.parse(localStorage.getItem("profile"));
                document.getElementById('firstname').value = profile.firstname;
                document.getElementById('firstLastname').value = profile.firstLastName;
            }
            
        }
        );

        //CARGAR ELEMENTOS

        //GUARDA LO QUE SE HA EDITADO DEL PERFIL

        function saveProfile() {
    const profile = {
        firstname: document.getElementById('firstname').value,
        firstLastName: document.getElementById('firstLastname').value,
        country: document.getElementById('country').value,
        city: document.getElementById('city').value,
        address: document.getElementById('address').value,
        postalCode: document.getElementById('postalcode').value,
        phoneNumber: document.getElementById('Phonenumber').value,
        experience: document.getElementById('experienceyear').value,
        bio: document.getElementById('bio').value,
        studio: document.getElementById('options').value,
        languages2: document.getElementById('languages2').value
    };

    localStorage.setItem("profile", JSON.stringify(profile));
}




        //-------------------FOTO DE PERFIL----------------------
        // Evento de clic en el botón para abrir el input file
        uploadBtn.addEventListener("click", () => {
            fileInput.click();
        });

        // Manejo del archivo seleccionado
        fileInput.addEventListener("change", (event) => {
            const file = event.target.files[0];

            if (file) {
                const reader = new FileReader();

                // Cargar la imagen seleccionada
                reader.onload = function(e) {
                    imageInput.src = e.target.result;
                };

                reader.readAsDataURL(file);
            }
        });

        // Restaurar imagen predeterminada si la imagen no se carga
        imageInput.onerror = function () {
            imageInput.src = defaultImage;
        };

        // Evento para eliminar la imagen y volver a la predeterminada
        removeBtn.addEventListener("click", () => {
            imageInput.src = defaultImage;
            fileInput.value = ""; // Limpiar el input file para poder volver a subir la misma imagen si se desea
        });


        //---------------------------ETIQUETAS---------------------------------------------

        const tagContainer = document.getElementById("tagContainer");
        const tagInput = document.getElementById("tagInput");

        function updateInputVisibility() {
            const existingTags = document.querySelectorAll(".tag").length;
            if (existingTags == 7) {
                tagInput.classList.add("hidden");
            } else {
                tagInput.classList.remove("hidden");
            }
        }

        //ELIMINA ETIQUETA
        function removeTag(event) {
            event.target.parentElement.remove();
            updateInputVisibility();
        }

            //AGREGAR ETIQUETAS

        tagInput.addEventListener("keypress", function(event) {
            if (event.key === "Enter" && tagInput.value.trim() !== "") {
                event.preventDefault();

                if (document.querySelectorAll(".tag").length >= 7) {
                    alert('You put the maximum tags');
                    return;
                }


                //CUANDO CIERRE A X EN ETIQUETA SE ELIMINA Y SUMA 1 vacio para poner otra etiqueta
                const newTag = document.createElement("div");
                newTag.classList.add("tag");
                newTag.innerHTML = `${tagInput.value} <span class="close">&times;</span>`;
                newTag.querySelector(".close").addEventListener("click", removeTag);
                tagContainer.insertBefore(newTag, tagInput);

                tagInput.value = "";
                updateInputVisibility();
            }
        });
    </script>
</body>
</html>
