<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barcelona Audio Tour</title>
    <link rel="stylesheet" href="BarcelonaAudioTour.css">
    <link rel="shortcut icon" href="Group 3 (1).png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
</head>
<body>
    <main>
        <div class="logo">
            <p class="logo-p">Barcelona Audio Tour</p>
        </div>

        <select name="idiomas" id="languages">
            <option value="Spanish">ES</option>
            <option style="font-family: Inter, sans-serif;" value="English">EN</option>
        </select>

        <div class="sitios">
            <div class="sitio" data-audio-es="torregloriess.mp3" data-audio-en="torregloriess-en.mp3">
                <img class="imagensitio" src="torreagbarfondo.jpg" alt="Torre Glòries">
                <div class="agbar-name">Torre Glòries</div>
                <img src="Vector.png" class="iconplay" alt="Play">
                <div class="reproductor"></div>
            </div>

            <div class="sitio" data-audio-es="sagradafamilia.mp3" data-audio-en="sagradafamilia-en.mp3">
                <img class="imagensitiosagradafamilia" src="sagradafamiliafondo.jpg" alt="Sagrada Familia">
                <div class="sagradafamilia">Sagrada Familia</div>
                <img src="Vector.png" class="iconplay" alt="Play">
                <div class="reproductor"></div>
            </div>

            <div class="sitio" data-audio-es="La Casa Batlló.mp3" data-audio-en="La Casa Batlló-en.mp3">
                <img class="imagensitiosagradafamilia" src="casabatllofondo.jpg" alt="Casa Batlló">
                <div class="casabatllo">Casa Batlló</div>
                <img src="Vector.png" class="iconplay" alt="Play">
                <div class="reproductor"></div>
            </div>
        </div>

        <audio style="display: none;" id="player" controls></audio>
    </main>

   <script>
    const sitios = document.querySelectorAll(".sitio");
    const playButtons = document.querySelectorAll(".iconplay");
    const audio = document.getElementById("player");
    const selectIdioma = document.getElementById("languages");

    playButtons.forEach(play => {
        play.addEventListener("click", () => {
            const sitio = play.closest(".sitio");

            // 1️⃣ Quitar 'sitio-active' de todos los sitios
            sitios.forEach(s => s.classList.remove("sitio-active"));

            // 2️⃣ Añadir 'sitio-active' solo al sitio clicado
            sitio.classList.add("sitio-active");

            // 3️⃣ Seleccionar el audio según idioma
            let audioSrc = (selectIdioma.value === "English") 
                ? sitio.dataset.audioEn 
                : sitio.dataset.audioEs;

            console.log("Audio seleccionado:", audioSrc); // depuración

            // 4️⃣ Reproducir audio
            audio.src = audioSrc;
            audio.play().catch(err => console.log("Error de reproducción:", err));
        });
    });

    // Cambiar idioma del audio actual si ya se está reproduciendo
    selectIdioma.addEventListener("change", () => {
        if (!audio.src) return;
        const currentSitio = [...sitios].find(sitio =>
            sitio.dataset.audioEs === audio.src.split('/').pop() || 
            sitio.dataset.audioEn === audio.src.split('/').pop()
        );

        if (currentSitio) {
            let newSrc = (selectIdioma.value === "English") 
                ? currentSitio.dataset.audioEn 
                : currentSitio.dataset.audioEs;
            
            audio.src = newSrc;
            audio.play().catch(err => console.log("Error de reproducción:", err));
        }
    });
</script>

</body>
</html>
